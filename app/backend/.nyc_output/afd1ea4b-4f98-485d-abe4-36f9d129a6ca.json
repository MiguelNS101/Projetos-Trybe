{"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/app.ts":{"path":"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/app.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":35}},"2":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"3":{"start":{"line":5,"column":21},"end":{"line":5,"column":51}},"4":{"start":{"line":6,"column":21},"end":{"line":6,"column":51}},"5":{"start":{"line":7,"column":22},"end":{"line":7,"column":53}},"6":{"start":{"line":10,"column":8},"end":{"line":10,"column":29}},"7":{"start":{"line":11,"column":8},"end":{"line":11,"column":22}},"8":{"start":{"line":13,"column":8},"end":{"line":13,"column":64}},"9":{"start":{"line":13,"column":40},"end":{"line":13,"column":62}},"10":{"start":{"line":16,"column":30},"end":{"line":21,"column":9}},"11":{"start":{"line":17,"column":12},"end":{"line":17,"column":59}},"12":{"start":{"line":18,"column":12},"end":{"line":18,"column":92}},"13":{"start":{"line":19,"column":12},"end":{"line":19,"column":60}},"14":{"start":{"line":20,"column":12},"end":{"line":20,"column":19}},"15":{"start":{"line":22,"column":8},"end":{"line":22,"column":37}},"16":{"start":{"line":23,"column":8},"end":{"line":23,"column":36}},"17":{"start":{"line":24,"column":8},"end":{"line":24,"column":43}},"18":{"start":{"line":25,"column":8},"end":{"line":25,"column":43}},"19":{"start":{"line":26,"column":8},"end":{"line":26,"column":44}},"20":{"start":{"line":29,"column":8},"end":{"line":29,"column":76}},"21":{"start":{"line":29,"column":36},"end":{"line":29,"column":74}},"22":{"start":{"line":32,"column":0},"end":{"line":32,"column":18}},"23":{"start":{"line":34,"column":0},"end":{"line":34,"column":28}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":18},"end":{"line":14,"column":5}},"line":9},"1":{"name":"(anonymous_1)","decl":{"start":{"line":13,"column":26},"end":{"line":13,"column":27}},"loc":{"start":{"line":13,"column":40},"end":{"line":13,"column":62}},"line":13},"2":{"name":"(anonymous_2)","decl":{"start":{"line":15,"column":4},"end":{"line":15,"column":5}},"loc":{"start":{"line":15,"column":13},"end":{"line":27,"column":5}},"line":15},"3":{"name":"(anonymous_3)","decl":{"start":{"line":16,"column":30},"end":{"line":16,"column":31}},"loc":{"start":{"line":16,"column":51},"end":{"line":21,"column":9}},"line":16},"4":{"name":"(anonymous_4)","decl":{"start":{"line":28,"column":4},"end":{"line":28,"column":5}},"loc":{"start":{"line":28,"column":16},"end":{"line":30,"column":5}},"line":28},"5":{"name":"(anonymous_5)","decl":{"start":{"line":29,"column":30},"end":{"line":29,"column":31}},"loc":{"start":{"line":29,"column":36},"end":{"line":29,"column":74}},"line":29}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":0,"10":1,"11":18,"12":18,"13":18,"14":18,"15":1,"16":1,"17":1,"18":1,"19":1,"20":0,"21":0,"22":1,"23":1},"f":{"0":1,"1":0,"2":1,"3":18,"4":0,"5":0},"b":{},"inputSourceMap":{"version":3,"file":"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/app.ts","sources":["/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/app.ts"],"names":[],"mappings":";;;AAAA,mCAAmC;AACnC,oDAA4C;AAC5C,oDAA6C;AAC7C,sDAA+C;AAE/C,MAAM,GAAG;IAGP;QACE,IAAI,CAAC,GAAG,GAAG,OAAO,EAAE,CAAC;QAErB,IAAI,CAAC,MAAM,EAAE,CAAC;QAEd,0BAA0B;QAC1B,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;IAC1D,CAAC;IAEO,MAAM;QACZ,MAAM,aAAa,GAA2B,CAAC,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,EAAE;YAChE,GAAG,CAAC,MAAM,CAAC,6BAA6B,EAAE,GAAG,CAAC,CAAC;YAC/C,GAAG,CAAC,MAAM,CAAC,8BAA8B,EAAE,mCAAmC,CAAC,CAAC;YAChF,GAAG,CAAC,MAAM,CAAC,8BAA8B,EAAE,GAAG,CAAC,CAAC;YAChD,IAAI,EAAE,CAAC;QACT,CAAC,CAAC;QAEF,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC,CAAC;QAC7B,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;QAC5B,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,oBAAS,CAAC,CAAC;QACxB,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,oBAAU,CAAC,CAAC;QACzB,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,qBAAW,CAAC,CAAC;IAC5B,CAAC;IAEM,KAAK,CAAC,IAAqB;QAChC,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,EAAE,GAAG,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,mBAAmB,IAAI,EAAE,CAAC,CAAC,CAAC;IACtE,CAAC;CACF;AAEQ,kBAAG;AAEZ,8DAA8D;AAC/C,WAAG,GAAK,IAAI,GAAG,EAAE,KAAC","sourcesContent":["import * as express from 'express';\nimport userRoute from './router/userRouter';\nimport teamRouter from './router/teamRouter';\nimport matchRouter from './router/matchRouter';\n\nclass App {\n  public app: express.Express;\n\n  constructor() {\n    this.app = express();\n\n    this.config();\n\n    // Não remover essa rota /\n    this.app.get('/', (req, res) => res.json({ ok: true }));\n  }\n\n  private config():void {\n    const accessControl: express.RequestHandler = (_req, res, next) => {\n      res.header('Access-Control-Allow-Origin', '*');\n      res.header('Access-Control-Allow-Methods', 'GET,POST,DELETE,OPTIONS,PUT,PATCH');\n      res.header('Access-Control-Allow-Headers', '*');\n      next();\n    };\n\n    this.app.use(express.json());\n    this.app.use(accessControl);\n    this.app.use(userRoute);\n    this.app.use(teamRouter);\n    this.app.use(matchRouter);\n  }\n\n  public start(PORT: string | number):void {\n    this.app.listen(PORT, () => console.log(`Running on port ${PORT}`));\n  }\n}\n\nexport { App };\n\n// A execução dos testes de cobertura depende dessa exportação\nexport const { app } = new App();\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"90162ec33e31abdbb0c5bef4e3a1ebe3d49bf816"},"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/router/userRouter.ts":{"path":"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/router/userRouter.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":18},"end":{"line":3,"column":36}},"2":{"start":{"line":4,"column":25},"end":{"line":4,"column":65}},"3":{"start":{"line":5,"column":25},"end":{"line":5,"column":65}},"4":{"start":{"line":6,"column":15},"end":{"line":6,"column":38}},"5":{"start":{"line":7,"column":23},"end":{"line":7,"column":53}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":70}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":55}},"8":{"start":{"line":10,"column":0},"end":{"line":10,"column":25}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/router/userRouter.ts","sources":["/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/router/userRouter.ts"],"names":[],"mappings":";;AAAA,qCAAiC;AACjC,kEAAuD;AACvD,kEAA2D;AAE3D,MAAM,MAAM,GAAG,IAAA,gBAAM,GAAE,CAAC;AACxB,MAAM,cAAc,GAAG,IAAI,wBAAU,EAAE,CAAC;AAExC,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,wBAAc,EAAE,cAAc,CAAC,KAAK,CAAC,CAAC;AAC5D,MAAM,CAAC,GAAG,CAAC,iBAAiB,EAAE,cAAc,CAAC,QAAQ,CAAC,CAAC;AAEvD,kBAAe,MAAM,CAAC","sourcesContent":["import { Router } from 'express';\nimport Controller from '../controllers/userController';\nimport userMiddleware from '../middlewares/userMiddleware';\n\nconst routes = Router();\nconst userController = new Controller();\n\nroutes.post('/login', userMiddleware, userController.login);\nroutes.get('/login/validate', userController.validate);\n\nexport default routes;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e06819f163b60997725f79319e9094cc73f1f10d"},"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/controllers/userController.ts":{"path":"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/controllers/userController.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":22},"end":{"line":3,"column":56}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":52}},"3":{"start":{"line":7,"column":8},"end":{"line":19,"column":10}},"4":{"start":{"line":8,"column":12},"end":{"line":18,"column":13}},"5":{"start":{"line":9,"column":44},"end":{"line":9,"column":52}},"6":{"start":{"line":10,"column":30},"end":{"line":10,"column":76}},"7":{"start":{"line":11,"column":16},"end":{"line":13,"column":17}},"8":{"start":{"line":12,"column":20},"end":{"line":12,"column":92}},"9":{"start":{"line":14,"column":16},"end":{"line":14,"column":55}},"10":{"start":{"line":17,"column":16},"end":{"line":17,"column":28}},"11":{"start":{"line":20,"column":8},"end":{"line":33,"column":10}},"12":{"start":{"line":21,"column":12},"end":{"line":32,"column":13}},"13":{"start":{"line":22,"column":42},"end":{"line":22,"column":53}},"14":{"start":{"line":23,"column":30},"end":{"line":23,"column":43}},"15":{"start":{"line":24,"column":29},"end":{"line":24,"column":64}},"16":{"start":{"line":25,"column":16},"end":{"line":27,"column":17}},"17":{"start":{"line":26,"column":20},"end":{"line":26,"column":84}},"18":{"start":{"line":28,"column":16},"end":{"line":28,"column":50}},"19":{"start":{"line":31,"column":16},"end":{"line":31,"column":28}},"20":{"start":{"line":36,"column":0},"end":{"line":36,"column":29}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":4},"end":{"line":5,"column":5}},"loc":{"start":{"line":5,"column":18},"end":{"line":34,"column":5}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":7,"column":21},"end":{"line":7,"column":22}},"loc":{"start":{"line":7,"column":47},"end":{"line":19,"column":9}},"line":7},"2":{"name":"(anonymous_2)","decl":{"start":{"line":20,"column":24},"end":{"line":20,"column":25}},"loc":{"start":{"line":20,"column":50},"end":{"line":33,"column":9}},"line":20}},"branchMap":{"0":{"loc":{"start":{"line":11,"column":16},"end":{"line":13,"column":17}},"type":"if","locations":[{"start":{"line":11,"column":16},"end":{"line":13,"column":17}},{"start":{"line":11,"column":16},"end":{"line":13,"column":17}}],"line":11},"1":{"loc":{"start":{"line":25,"column":16},"end":{"line":27,"column":17}},"type":"if","locations":[{"start":{"line":25,"column":16},"end":{"line":27,"column":17}},{"start":{"line":25,"column":16},"end":{"line":27,"column":17}}],"line":25}},"s":{"0":1,"1":1,"2":1,"3":1,"4":2,"5":2,"6":2,"7":2,"8":1,"9":1,"10":0,"11":1,"12":2,"13":2,"14":2,"15":2,"16":2,"17":1,"18":1,"19":0,"20":1},"f":{"0":1,"1":2,"2":2},"b":{"0":[1,1],"1":[1,1]},"inputSourceMap":{"version":3,"file":"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/controllers/userController.ts","sources":["/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/controllers/userController.ts"],"names":[],"mappings":";;AACA,yDAAkD;AAElD,MAAqB,UAAU;IAA/B;QACS,aAAQ,GAAG,IAAI,qBAAW,EAAE,CAAC;QAEpC,UAAK,GAAG,KAAK,EAAE,GAAY,EAAE,GAAa,EAAE,IAAkB,EAAE,EAAE;YAChE,IAAI;gBACF,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,GAAG,GAAG,CAAC,IAAI,CAAC;gBACrC,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC,CAAC;gBAC7D,IAAI,CAAC,KAAK,EAAE;oBACV,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,6BAA6B,EAAE,CAAC,CAAC;iBACzE;gBACD,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC;aACxC;YAAC,OAAO,KAAK,EAAE;gBACd,IAAI,CAAC,KAAK,CAAC,CAAC;aACb;QACH,CAAC,CAAC;QAEF,aAAQ,GAAG,KAAK,EAAE,GAAY,EAAE,GAAa,EAAE,IAAkB,EAAE,EAAE;YACnE,IAAI;gBACF,MAAM,EAAE,aAAa,EAAE,GAAG,GAAG,CAAC,OAAO,CAAC;gBACtC,MAAM,KAAK,GAAG,aAAuB,CAAC;gBACtC,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;gBACjD,IAAI,CAAC,IAAI,EAAE;oBACT,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,qBAAqB,EAAE,CAAC,CAAC;iBACjE;gBACD,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aACnC;YAAC,OAAO,KAAK,EAAE;gBACd,IAAI,CAAC,KAAK,CAAC,CAAC;aACb;QACH,CAAC,CAAC;IACJ,CAAC;CAAA;AA7BD,6BA6BC","sourcesContent":["import { Request, Response, NextFunction } from 'express';\nimport UserService from '../services/userService';\n\nexport default class Controller {\n  public uService = new UserService();\n\n  login = async (req: Request, res: Response, next: NextFunction) => {\n    try {\n      const { password, email } = req.body;\n      const token = await this.uService.login({ password, email });\n      if (!token) {\n        return res.status(401).send({ message: 'Incorrect email or password' });\n      }\n      return res.status(200).json({ token });\n    } catch (error) {\n      next(error);\n    }\n  };\n\n  validate = async (req: Request, res: Response, next: NextFunction) => {\n    try {\n      const { authorization } = req.headers;\n      const token = authorization as string;\n      const role = await this.uService.validate(token);\n      if (!role) {\n        return res.status(401).send({ message: 'Token must be valid' });\n      }\n      return res.status(200).json(role);\n    } catch (error) {\n      next(error);\n    }\n  };\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"5675e56fe758fd13a4b03e7a3c7df376314063fc"},"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/services/userService.ts":{"path":"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/services/userService.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":20},"end":{"line":3,"column":59}},"2":{"start":{"line":4,"column":25},"end":{"line":4,"column":59}},"3":{"start":{"line":5,"column":20},"end":{"line":5,"column":49}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":41}},"5":{"start":{"line":9,"column":8},"end":{"line":9,"column":53}},"6":{"start":{"line":10,"column":8},"end":{"line":10,"column":45}},"7":{"start":{"line":11,"column":8},"end":{"line":24,"column":10}},"8":{"start":{"line":12,"column":25},"end":{"line":14,"column":14}},"9":{"start":{"line":15,"column":12},"end":{"line":17,"column":13}},"10":{"start":{"line":16,"column":16},"end":{"line":16,"column":29}},"11":{"start":{"line":18,"column":56},"end":{"line":18,"column":60}},"12":{"start":{"line":19,"column":34},"end":{"line":19,"column":90}},"13":{"start":{"line":20,"column":12},"end":{"line":22,"column":13}},"14":{"start":{"line":21,"column":16},"end":{"line":21,"column":29}},"15":{"start":{"line":23,"column":12},"end":{"line":23,"column":64}},"16":{"start":{"line":25,"column":8},"end":{"line":32,"column":10}},"17":{"start":{"line":26,"column":27},"end":{"line":26,"column":54}},"18":{"start":{"line":27,"column":12},"end":{"line":29,"column":13}},"19":{"start":{"line":28,"column":16},"end":{"line":28,"column":29}},"20":{"start":{"line":30,"column":40},"end":{"line":30,"column":46}},"21":{"start":{"line":31,"column":12},"end":{"line":31,"column":28}},"22":{"start":{"line":35,"column":0},"end":{"line":35,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":4},"end":{"line":7,"column":5}},"loc":{"start":{"line":7,"column":18},"end":{"line":33,"column":5}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":11,"column":21},"end":{"line":11,"column":22}},"loc":{"start":{"line":11,"column":37},"end":{"line":24,"column":9}},"line":11},"2":{"name":"(anonymous_2)","decl":{"start":{"line":25,"column":24},"end":{"line":25,"column":25}},"loc":{"start":{"line":25,"column":41},"end":{"line":32,"column":9}},"line":25}},"branchMap":{"0":{"loc":{"start":{"line":15,"column":12},"end":{"line":17,"column":13}},"type":"if","locations":[{"start":{"line":15,"column":12},"end":{"line":17,"column":13}},{"start":{"line":15,"column":12},"end":{"line":17,"column":13}}],"line":15},"1":{"loc":{"start":{"line":20,"column":12},"end":{"line":22,"column":13}},"type":"if","locations":[{"start":{"line":20,"column":12},"end":{"line":22,"column":13}},{"start":{"line":20,"column":12},"end":{"line":22,"column":13}}],"line":20},"2":{"loc":{"start":{"line":27,"column":12},"end":{"line":29,"column":13}},"type":"if","locations":[{"start":{"line":27,"column":12},"end":{"line":29,"column":13}},{"start":{"line":27,"column":12},"end":{"line":29,"column":13}}],"line":27}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":2,"9":2,"10":0,"11":2,"12":2,"13":2,"14":1,"15":1,"16":1,"17":2,"18":2,"19":1,"20":1,"21":1,"22":1},"f":{"0":1,"1":2,"2":2},"b":{"0":[0,2],"1":[1,1],"2":[1,1]},"inputSourceMap":{"version":3,"file":"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/services/userService.ts","sources":["/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/services/userService.ts"],"names":[],"mappings":";;AAKA,4DAAiD;AACjD,4DAAmD;AACnD,kDAA2C;AAE3C,MAAqB,WAAW;IAAhC;QACU,UAAK,GAAG,mBAAK,CAAC;QACd,WAAM,GAAG,IAAI,wBAAY,EAAE,CAAC;QAC5B,QAAG,GAAG,IAAI,mBAAS,EAAE,CAAC;QAE9B,UAAK,GAAG,KAAK,EAAE,IAAoB,EAAE,EAAE;YACrC,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC;gBACpC,KAAK,EAAE,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE;aAC7B,CAAC,CAAC;YACH,IAAI,CAAC,IAAI,EAAE;gBACT,OAAO,KAAK,CAAC;aACd;YAED,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,QAAQ,EAAE,KAAK,EAAE,GAAG,IAAgC,CAAC;YAE7E,MAAM,aAAa,GAAG,MAAM,IAAI,CAAC,MAAM,CAAC,aAAa,CACnD,IAAI,CAAC,QAAQ,EACb,QAAQ,CACT,CAAC;YACF,IAAI,CAAC,aAAa,EAAE;gBAClB,OAAO,KAAK,CAAC;aACd;YAED,OAAO,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE,IAAI,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC,CAAC;QACtD,CAAC,CAAC;QAEF,aAAQ,GAAG,KAAK,EAAE,KAAa,EAAE,EAAE;YACjC,MAAM,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;YAC3C,IAAI,CAAC,MAAM,EAAE;gBACX,OAAO,KAAK,CAAC;aACd;YACD,MAAM,EACJ,IAAI,EAAE,EAAE,IAAI,EAAE,GACf,GAAG,MAAmB,CAAC;YACxB,OAAO,EAAE,IAAI,EAAE,CAAC;QAClB,CAAC,CAAC;IACJ,CAAC;CAAA;AApCD,8BAoCC","sourcesContent":["import {\n  LoginInterface,\n  UserInterface,\n  TokenData,\n} from '../interfaces/userInterface';\nimport Model from '../database/models/UserModel';\nimport HandleBcrypt from '../funcs/handleBcryptjs';\nimport HandleJWT from '../funcs/handleJWT';\n\nexport default class UserService {\n  private model = Model;\n  private bcrypt = new HandleBcrypt();\n  private jwt = new HandleJWT();\n\n  login = async (data: LoginInterface) => {\n    const user = await this.model.findOne({\n      where: { email: data.email },\n    });\n    if (!user) {\n      return false;\n    }\n\n    const { password, role, username, email } = user as unknown as UserInterface;\n\n    const checkPassword = await this.bcrypt.checkPassword(\n      data.password,\n      password,\n    );\n    if (!checkPassword) {\n      return false;\n    }\n\n    return this.jwt.genToken({ role, username, email });\n  };\n\n  validate = async (token: string) => {\n    const verify = this.jwt.verifyToken(token);\n    if (!verify) {\n      return false;\n    }\n    const {\n      data: { role },\n    } = verify as TokenData;\n    return { role };\n  };\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"6893af3b6c19413c7a2438ff4308afdbd9810e75"},"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/database/models/UserModel.ts":{"path":"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/database/models/UserModel.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":20},"end":{"line":3,"column":40}},"2":{"start":{"line":4,"column":11},"end":{"line":4,"column":23}},"3":{"start":{"line":7,"column":0},"end":{"line":34,"column":3}},"4":{"start":{"line":35,"column":0},"end":{"line":35,"column":24}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/database/models/UserModel.ts","sources":["/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/database/models/UserModel.ts"],"names":[],"mappings":";;AAAA,yCAAmD;AACnD,wBAAmB;AAEnB,MAAM,KAAM,SAAQ,iBAAK;CAMxB;AAED,KAAK,CAAC,IAAI,CACR;IACE,EAAE,EAAE;QACF,IAAI,EAAE,mBAAO;QACb,SAAS,EAAE,KAAK;QAChB,UAAU,EAAE,IAAI;QAChB,aAAa,EAAE,IAAI;KACpB;IACD,QAAQ,EAAE;QACR,IAAI,EAAE,kBAAM;QACZ,SAAS,EAAE,KAAK;KACjB;IACD,IAAI,EAAE;QACJ,IAAI,EAAE,kBAAM;QACZ,SAAS,EAAE,KAAK;KACjB;IACD,KAAK,EAAE;QACL,IAAI,EAAE,kBAAM;QACZ,SAAS,EAAE,KAAK;KACjB;IACD,QAAQ,EAAE;QACR,IAAI,EAAE,IAAA,kBAAM,EAAC,GAAG,CAAC;QACjB,SAAS,EAAE,KAAK;KACjB;CACF,EACD;IACE,SAAS,EAAE,UAAE;IACb,SAAS,EAAE,OAAO;IAClB,UAAU,EAAE,KAAK;CAClB,CACF,CAAC;AAEF,kBAAe,KAAK,CAAC","sourcesContent":["import { Model, INTEGER, STRING } from 'sequelize';\nimport db from '.';\n\nclass Users extends Model {\n  public id!: number;\n  public username!: string;\n  public role!: string;\n  public email!: string;\n  public password!: string;\n}\n\nUsers.init(\n  {\n    id: {\n      type: INTEGER,\n      allowNull: false,\n      primaryKey: true,\n      autoIncrement: true,\n    },\n    username: {\n      type: STRING,\n      allowNull: false,\n    },\n    role: {\n      type: STRING,\n      allowNull: false,\n    },\n    email: {\n      type: STRING,\n      allowNull: false,\n    },\n    password: {\n      type: STRING(100),\n      allowNull: false,\n    },\n  },\n  {\n    sequelize: db,\n    modelName: 'users',\n    timestamps: false,\n  },\n);\n\nexport default Users;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"80de45915d5d816ca9ff6364a59f05ae496c50a8"},"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/database/models/index.ts":{"path":"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/database/models/index.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":20},"end":{"line":3,"column":40}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":44}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":52}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/database/models/index.ts","sources":["/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/database/models/index.ts"],"names":[],"mappings":";;AAAA,yCAAsC;AACtC,6CAA6C;AAE7C,kBAAe,IAAI,qBAAS,CAAC,MAAM,CAAC,CAAC","sourcesContent":["import { Sequelize } from 'sequelize';\nimport * as config from '../config/database';\n\nexport default new Sequelize(config);\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"93f255925dd2bbe7b70395af9df20f78414607c8"},"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/funcs/handleBcryptjs.ts":{"path":"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/funcs/handleBcryptjs.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":15},"end":{"line":3,"column":34}},"2":{"start":{"line":6,"column":8},"end":{"line":9,"column":10}},"3":{"start":{"line":7,"column":32},"end":{"line":7,"column":73}},"4":{"start":{"line":8,"column":12},"end":{"line":8,"column":31}},"5":{"start":{"line":12,"column":0},"end":{"line":12,"column":31}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":4},"end":{"line":5,"column":5}},"loc":{"start":{"line":5,"column":18},"end":{"line":10,"column":5}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":29},"end":{"line":6,"column":30}},"loc":{"start":{"line":6,"column":60},"end":{"line":9,"column":9}},"line":6}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":2,"4":2,"5":1},"f":{"0":1,"1":2},"b":{},"inputSourceMap":{"version":3,"file":"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/funcs/handleBcryptjs.ts","sources":["/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/funcs/handleBcryptjs.ts"],"names":[],"mappings":";;AAAA,mCAAmC;AAEnC,MAAqB,YAAY;IAAjC;QACE,kBAAa,GAAG,KAAK,EAAE,QAAgB,EAAE,SAAiB,EAAE,EAAE;YAC5D,MAAM,WAAW,GAAG,MAAM,MAAM,CAAC,OAAO,CAAC,QAAQ,EAAE,SAAS,CAAC,CAAC;YAC9D,OAAO,WAAW,CAAC;QACrB,CAAC,CAAC;IACJ,CAAC;CAAA;AALD,+BAKC","sourcesContent":["import * as bcrypt from 'bcryptjs';\n\nexport default class HandleBcrypt {\n  checkPassword = async (password: string, encrypted: string) => {\n    const resPassword = await bcrypt.compare(password, encrypted);\n    return resPassword;\n  };\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1901ebcf6c1c53f9a7655404378b79b0034e50d8"},"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/funcs/handleJWT.ts":{"path":"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/funcs/handleJWT.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":23},"end":{"line":3,"column":46}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":38}},"3":{"start":{"line":9,"column":30},"end":{"line":9,"column":34}},"4":{"start":{"line":10,"column":22},"end":{"line":13,"column":10}},"5":{"start":{"line":14,"column":8},"end":{"line":14,"column":21}},"6":{"start":{"line":17,"column":8},"end":{"line":24,"column":9}},"7":{"start":{"line":18,"column":34},"end":{"line":18,"column":38}},"8":{"start":{"line":19,"column":24},"end":{"line":19,"column":68}},"9":{"start":{"line":20,"column":12},"end":{"line":20,"column":23}},"10":{"start":{"line":23,"column":12},"end":{"line":23,"column":24}},"11":{"start":{"line":27,"column":0},"end":{"line":27,"column":28}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":4},"end":{"line":5,"column":5}},"loc":{"start":{"line":5,"column":18},"end":{"line":7,"column":5}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":4},"end":{"line":8,"column":5}},"loc":{"start":{"line":8,"column":19},"end":{"line":15,"column":5}},"line":8},"2":{"name":"(anonymous_2)","decl":{"start":{"line":16,"column":4},"end":{"line":16,"column":5}},"loc":{"start":{"line":16,"column":23},"end":{"line":25,"column":5}},"line":16}},"branchMap":{},"s":{"0":1,"1":1,"2":5,"3":1,"4":1,"5":1,"6":6,"7":6,"8":6,"9":4,"10":2,"11":1},"f":{"0":5,"1":1,"2":6},"b":{},"inputSourceMap":{"version":3,"file":"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/funcs/handleJWT.ts","sources":["/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/funcs/handleJWT.ts"],"names":[],"mappings":";;AAAA,+CAA4C;AAG5C,MAAqB,SAAS;IAA9B;QACS,cAAS,GAAG,YAAY,CAAC;IAoBlC,CAAC;IAlBC,QAAQ,CAAC,IAAkB;QACzB,MAAM,EAAE,SAAS,EAAE,GAAG,IAAI,CAAC;QAC3B,MAAM,KAAK,GAAG,IAAA,mBAAI,EAAC,EAAE,IAAI,EAAE,IAAI,EAAE,EAAE,SAAS,EAAE;YAC5C,SAAS,EAAE,IAAI;YACf,SAAS,EAAE,OAAO;SACnB,CAAC,CAAC;QACH,OAAO,KAAK,CAAC;IACf,CAAC;IAED,WAAW,CAAC,KAAa;QACvB,IAAI;YACF,MAAM,EAAE,SAAS,EAAE,GAAG,IAAI,CAAC;YAC3B,MAAM,GAAG,GAAG,IAAA,qBAAM,EAAC,KAAK,EAAE,SAAS,CAAC,CAAC;YACrC,OAAO,GAAgB,CAAC;SACzB;QAAC,OAAO,GAAG,EAAE;YACZ,OAAO,IAAI,CAAC;SACb;IACH,CAAC;CACF;AArBD,4BAqBC","sourcesContent":["import { sign, verify } from 'jsonwebtoken';\nimport { JWTInterface, TokenData } from '../interfaces/userInterface';\n\nexport default class HandleJWT {\n  public jwtSecret = 'jwt_secret';\n\n  genToken(user: JWTInterface): string {\n    const { jwtSecret } = this;\n    const token = sign({ data: user }, jwtSecret, {\n      expiresIn: '7d',\n      algorithm: 'HS256',\n    });\n    return token;\n  }\n\n  verifyToken(token: string): TokenData | null {\n    try {\n      const { jwtSecret } = this;\n      const res = verify(token, jwtSecret);\n      return res as TokenData;\n    } catch (err) {\n      return null;\n    }\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"dae1a3ca1fa0d71187c9b7ef0c8e774a4b5942bb"},"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/middlewares/userMiddleware.ts":{"path":"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/middlewares/userMiddleware.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":19},"end":{"line":3,"column":40}},"2":{"start":{"line":5,"column":4},"end":{"line":9,"column":5}},"3":{"start":{"line":5,"column":17},"end":{"line":5,"column":18}},"4":{"start":{"line":6,"column":8},"end":{"line":8,"column":9}},"5":{"start":{"line":7,"column":12},"end":{"line":7,"column":42}},"6":{"start":{"line":10,"column":4},"end":{"line":10,"column":24}},"7":{"start":{"line":13,"column":20},"end":{"line":13,"column":40}},"8":{"start":{"line":14,"column":4},"end":{"line":19,"column":5}},"9":{"start":{"line":14,"column":17},"end":{"line":14,"column":18}},"10":{"start":{"line":15,"column":34},"end":{"line":15,"column":44}},"11":{"start":{"line":16,"column":8},"end":{"line":18,"column":9}},"12":{"start":{"line":17,"column":12},"end":{"line":17,"column":37}},"13":{"start":{"line":20,"column":4},"end":{"line":20,"column":24}},"14":{"start":{"line":23,"column":17},"end":{"line":23,"column":25}},"15":{"start":{"line":24,"column":18},"end":{"line":24,"column":42}},"16":{"start":{"line":25,"column":4},"end":{"line":27,"column":5}},"17":{"start":{"line":26,"column":8},"end":{"line":26,"column":78}},"18":{"start":{"line":28,"column":4},"end":{"line":28,"column":35}},"19":{"start":{"line":29,"column":4},"end":{"line":31,"column":5}},"20":{"start":{"line":30,"column":8},"end":{"line":30,"column":78}},"21":{"start":{"line":32,"column":4},"end":{"line":32,"column":11}},"22":{"start":{"line":34,"column":0},"end":{"line":34,"column":33}}},"fnMap":{"0":{"name":"validateProperties","decl":{"start":{"line":4,"column":9},"end":{"line":4,"column":27}},"loc":{"start":{"line":4,"column":34},"end":{"line":11,"column":1}},"line":4},"1":{"name":"validateValues","decl":{"start":{"line":12,"column":9},"end":{"line":12,"column":23}},"loc":{"start":{"line":12,"column":30},"end":{"line":21,"column":1}},"line":12},"2":{"name":"validationUser","decl":{"start":{"line":22,"column":9},"end":{"line":22,"column":23}},"loc":{"start":{"line":22,"column":40},"end":{"line":33,"column":1}},"line":22}},"branchMap":{"0":{"loc":{"start":{"line":6,"column":8},"end":{"line":8,"column":9}},"type":"if","locations":[{"start":{"line":6,"column":8},"end":{"line":8,"column":9}},{"start":{"line":6,"column":8},"end":{"line":8,"column":9}}],"line":6},"1":{"loc":{"start":{"line":16,"column":8},"end":{"line":18,"column":9}},"type":"if","locations":[{"start":{"line":16,"column":8},"end":{"line":18,"column":9}},{"start":{"line":16,"column":8},"end":{"line":18,"column":9}}],"line":16},"2":{"loc":{"start":{"line":25,"column":4},"end":{"line":27,"column":5}},"type":"if","locations":[{"start":{"line":25,"column":4},"end":{"line":27,"column":5}},{"start":{"line":25,"column":4},"end":{"line":27,"column":5}}],"line":25},"3":{"loc":{"start":{"line":29,"column":4},"end":{"line":31,"column":5}},"type":"if","locations":[{"start":{"line":29,"column":4},"end":{"line":31,"column":5}},{"start":{"line":29,"column":4},"end":{"line":31,"column":5}}],"line":29}},"s":{"0":1,"1":1,"2":4,"3":4,"4":8,"5":0,"6":4,"7":4,"8":4,"9":4,"10":7,"11":7,"12":2,"13":2,"14":4,"15":4,"16":4,"17":0,"18":4,"19":4,"20":2,"21":2,"22":1},"f":{"0":4,"1":4,"2":4},"b":{"0":[0,8],"1":[2,5],"2":[0,4],"3":[2,2]},"inputSourceMap":{"version":3,"file":"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/middlewares/userMiddleware.ts","sources":["/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/middlewares/userMiddleware.ts"],"names":[],"mappings":";;AAGA,MAAM,UAAU,GAAG,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC;AAEzC,SAAS,kBAAkB,CAAC,IAAmB;IAC7C,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,EAAE;QAC7C,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC,EAAE;YAC9D,OAAO,CAAC,KAAK,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;SAC/B;KACF;IACD,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;AACtB,CAAC;AAED,SAAS,cAAc,CAAC,IAAmB;IACzC,MAAM,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;IACrC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,EAAE;QAC1C,MAAM,CAAC,QAAQ,EAAE,KAAK,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;QACrC,IAAI,CAAC,KAAK,EAAE;YACV,OAAO,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;SAC1B;KACF;IACD,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;AACtB,CAAC;AAED,SAAS,cAAc,CAAC,GAAY,EAAE,GAAa,EAAE,IAAkB;IACrE,MAAM,IAAI,GAAkB,GAAG,CAAC,IAAI,CAAC;IAErC,IAAI,CAAC,KAAK,CAAC,GAAG,kBAAkB,CAAC,IAAI,CAAC,CAAC;IAEvC,IAAI,CAAC,KAAK,EAAE;QACV,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,2BAA2B,EAAE,CAAC,CAAC;KACvE;IAED,CAAC,KAAK,CAAC,GAAG,cAAc,CAAC,IAAI,CAAC,CAAC;IAE/B,IAAI,CAAC,KAAK,EAAE;QACV,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,2BAA2B,EAAE,CAAC,CAAC;KACvE;IAED,IAAI,EAAE,CAAC;AACT,CAAC;AAED,kBAAe,cAAc,CAAC","sourcesContent":["import { NextFunction, Request, Response } from 'express';\nimport { UserInterface } from '../interfaces/userInterface';\n\nconst properties = ['email', 'password'];\n\nfunction validateProperties(user: UserInterface): [boolean, string | null] {\n  for (let i = 0; i < properties.length; i += 1) {\n    if (!Object.prototype.hasOwnProperty.call(user, properties[i])) {\n      return [false, properties[i]];\n    }\n  }\n  return [true, null];\n}\n\nfunction validateValues(user: UserInterface): [boolean, string | null] {\n  const entries = Object.entries(user);\n  for (let i = 0; i < entries.length; i += 1) {\n    const [property, value] = entries[i];\n    if (!value) {\n      return [false, property];\n    }\n  }\n  return [true, null];\n}\n\nfunction validationUser(req: Request, res: Response, next: NextFunction) {\n  const user: UserInterface = req.body;\n\n  let [valid] = validateProperties(user);\n\n  if (!valid) {\n    return res.status(400).send({ message: 'All fields must be filled' });\n  }\n\n  [valid] = validateValues(user);\n\n  if (!valid) {\n    return res.status(400).send({ message: 'All fields must be filled' });\n  }\n\n  next();\n}\n\nexport default validationUser;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"51f5d547b99accf9b7c07d4de0677fea35ce81d1"},"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/router/teamRouter.ts":{"path":"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/router/teamRouter.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":18},"end":{"line":3,"column":36}},"2":{"start":{"line":4,"column":25},"end":{"line":4,"column":65}},"3":{"start":{"line":5,"column":15},"end":{"line":5,"column":38}},"4":{"start":{"line":6,"column":23},"end":{"line":6,"column":53}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":44}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":49}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":25}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/router/teamRouter.ts","sources":["/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/router/teamRouter.ts"],"names":[],"mappings":";;AAAA,qCAAiC;AACjC,kEAAuD;AAEvD,MAAM,MAAM,GAAG,IAAA,gBAAM,GAAE,CAAC;AACxB,MAAM,cAAc,GAAG,IAAI,wBAAU,EAAE,CAAC;AAExC,MAAM,CAAC,GAAG,CAAC,QAAQ,EAAE,cAAc,CAAC,MAAM,CAAC,CAAC;AAC5C,MAAM,CAAC,GAAG,CAAC,YAAY,EAAE,cAAc,CAAC,OAAO,CAAC,CAAC;AAEjD,kBAAe,MAAM,CAAC","sourcesContent":["import { Router } from 'express';\nimport Controller from '../controllers/teamController';\n\nconst routes = Router();\nconst teamController = new Controller();\n\nroutes.get('/teams', teamController.getAll);\nroutes.get('/teams/:id', teamController.getById);\n\nexport default routes;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"018ba2f8166997271bb73a035a819f28dac90e45"},"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/controllers/teamController.ts":{"path":"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/controllers/teamController.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":22},"end":{"line":3,"column":56}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":52}},"3":{"start":{"line":7,"column":8},"end":{"line":15,"column":10}},"4":{"start":{"line":8,"column":12},"end":{"line":14,"column":13}},"5":{"start":{"line":9,"column":30},"end":{"line":9,"column":58}},"6":{"start":{"line":10,"column":16},"end":{"line":10,"column":51}},"7":{"start":{"line":13,"column":16},"end":{"line":13,"column":28}},"8":{"start":{"line":16,"column":8},"end":{"line":28,"column":10}},"9":{"start":{"line":17,"column":12},"end":{"line":27,"column":13}},"10":{"start":{"line":18,"column":31},"end":{"line":18,"column":41}},"11":{"start":{"line":19,"column":29},"end":{"line":19,"column":60}},"12":{"start":{"line":20,"column":16},"end":{"line":22,"column":17}},"13":{"start":{"line":21,"column":20},"end":{"line":21,"column":74}},"14":{"start":{"line":23,"column":16},"end":{"line":23,"column":50}},"15":{"start":{"line":26,"column":16},"end":{"line":26,"column":28}},"16":{"start":{"line":31,"column":0},"end":{"line":31,"column":29}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":4},"end":{"line":5,"column":5}},"loc":{"start":{"line":5,"column":18},"end":{"line":29,"column":5}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":7,"column":22},"end":{"line":7,"column":23}},"loc":{"start":{"line":7,"column":49},"end":{"line":15,"column":9}},"line":7},"2":{"name":"(anonymous_2)","decl":{"start":{"line":16,"column":23},"end":{"line":16,"column":24}},"loc":{"start":{"line":16,"column":49},"end":{"line":28,"column":9}},"line":16}},"branchMap":{"0":{"loc":{"start":{"line":20,"column":16},"end":{"line":22,"column":17}},"type":"if","locations":[{"start":{"line":20,"column":16},"end":{"line":22,"column":17}},{"start":{"line":20,"column":16},"end":{"line":22,"column":17}}],"line":20}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":1,"9":2,"10":2,"11":2,"12":2,"13":1,"14":1,"15":0,"16":1},"f":{"0":1,"1":1,"2":2},"b":{"0":[1,1]},"inputSourceMap":{"version":3,"file":"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/controllers/teamController.ts","sources":["/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/controllers/teamController.ts"],"names":[],"mappings":";;AACA,yDAAkD;AAElD,MAAqB,UAAU;IAA/B;QACU,aAAQ,GAAG,IAAI,qBAAW,EAAE,CAAC;QAErC,WAAM,GAAG,KAAK,EAAE,IAAa,EAAE,GAAa,EAAE,IAAkB,EAAE,EAAE;YAClE,IAAI;gBACF,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;gBAC3C,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;aACpC;YAAC,OAAO,KAAK,EAAE;gBACd,IAAI,CAAC,KAAK,CAAC,CAAC;aACb;QACH,CAAC,CAAC;QAEF,YAAO,GAAG,KAAK,EAAE,GAAY,EAAE,GAAa,EAAE,IAAkB,EAAE,EAAE;YAClE,IAAI;gBACF,MAAM,EAAE,EAAE,EAAE,GAAG,GAAG,CAAC,MAAM,CAAC;gBAC1B,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;gBAC7C,IAAI,CAAC,IAAI,EAAE;oBACT,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,WAAW,EAAE,CAAC,CAAC;iBACvD;gBACD,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aACnC;YAAC,OAAO,KAAK,EAAE;gBACd,IAAI,CAAC,KAAK,CAAC,CAAC;aACb;QACH,CAAC,CAAC;IACJ,CAAC;CAAA;AAxBD,6BAwBC","sourcesContent":["import { Request, Response, NextFunction } from 'express';\nimport TeamService from '../services/teamService';\n\nexport default class Controller {\n  private tService = new TeamService();\n\n  getAll = async (_req: Request, res: Response, next: NextFunction) => {\n    try {\n      const teams = await this.tService.getAll();\n      return res.status(200).json(teams);\n    } catch (error) {\n      next(error);\n    }\n  };\n\n  getById = async (req: Request, res: Response, next: NextFunction) => {\n    try {\n      const { id } = req.params;\n      const team = await this.tService.getById(id);\n      if (!team) {\n        return res.status(404).send({ message: 'Not Found' });\n      }\n      return res.status(200).json(team);\n    } catch (error) {\n      next(error);\n    }\n  };\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"830b2975ce1b636eb1859af2e533d1c14fb1386b"},"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/services/teamService.ts":{"path":"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/services/teamService.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":20},"end":{"line":3,"column":59}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":41}},"3":{"start":{"line":7,"column":8},"end":{"line":10,"column":10}},"4":{"start":{"line":8,"column":26},"end":{"line":8,"column":52}},"5":{"start":{"line":9,"column":12},"end":{"line":9,"column":25}},"6":{"start":{"line":11,"column":8},"end":{"line":14,"column":10}},"7":{"start":{"line":12,"column":25},"end":{"line":12,"column":68}},"8":{"start":{"line":13,"column":12},"end":{"line":13,"column":24}},"9":{"start":{"line":17,"column":0},"end":{"line":17,"column":26}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":4},"end":{"line":5,"column":5}},"loc":{"start":{"line":5,"column":18},"end":{"line":15,"column":5}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":7,"column":22},"end":{"line":7,"column":23}},"loc":{"start":{"line":7,"column":34},"end":{"line":10,"column":9}},"line":7},"2":{"name":"(anonymous_2)","decl":{"start":{"line":11,"column":23},"end":{"line":11,"column":24}},"loc":{"start":{"line":11,"column":37},"end":{"line":14,"column":9}},"line":11}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":2,"8":2,"9":1},"f":{"0":1,"1":1,"2":2},"b":{},"inputSourceMap":{"version":3,"file":"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/services/teamService.ts","sources":["/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/services/teamService.ts"],"names":[],"mappings":";;AAAA,4DAAiD;AAEjD,MAAqB,OAAO;IAA5B;QACU,UAAK,GAAG,mBAAK,CAAC;QAEtB,WAAM,GAAG,KAAK,IAAI,EAAE;YAClB,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;YACzC,OAAO,KAAK,CAAC;QACf,CAAC,CAAC;QAEF,YAAO,GAAG,KAAK,EAAE,EAAU,EAAE,EAAE;YAC7B,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;YACzD,OAAO,IAAI,CAAC;QACd,CAAC,CAAC;IACJ,CAAC;CAAA;AAZD,0BAYC","sourcesContent":["import Model from '../database/models/TeamModel';\n\nexport default class Service {\n  private model = Model;\n\n  getAll = async () => {\n    const teams = await this.model.findAll();\n    return teams;\n  };\n\n  getById = async (id: string) => {\n    const team = await this.model.findOne({ where: { id } });\n    return team;\n  };\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"fd0f09fafbc6081aeaf756fd6930a5b2ebb6f71b"},"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/database/models/TeamModel.ts":{"path":"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/database/models/TeamModel.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":20},"end":{"line":3,"column":40}},"2":{"start":{"line":4,"column":11},"end":{"line":4,"column":23}},"3":{"start":{"line":7,"column":0},"end":{"line":14,"column":3}},"4":{"start":{"line":15,"column":0},"end":{"line":15,"column":23}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/database/models/TeamModel.ts","sources":["/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/database/models/TeamModel.ts"],"names":[],"mappings":";;AAAA,yCAA0C;AAC1C,wBAAmB;AAEnB,MAAM,IAAK,SAAQ,iBAAK;CAEvB;AAED,IAAI,CAAC,IAAI,CACP;IACE,QAAQ,EAAE,kBAAM;CACjB,EACD;IACE,WAAW,EAAE,IAAI;IACjB,SAAS,EAAE,UAAE;IACb,SAAS,EAAE,MAAM;IACjB,UAAU,EAAE,KAAK;CAClB,CACF,CAAC;AAEF,kBAAe,IAAI,CAAC","sourcesContent":["import { Model, STRING } from 'sequelize';\nimport db from '.';\n\nclass Team extends Model {\n  public teamName: string;\n}\n\nTeam.init(\n  {\n    teamName: STRING,\n  },\n  {\n    underscored: true,\n    sequelize: db,\n    modelName: 'team',\n    timestamps: false,\n  },\n);\n\nexport default Team;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"9522666615961e46c4ac2b4dda9498c78c84347a"},"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/router/matchRouter.ts":{"path":"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/router/matchRouter.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":18},"end":{"line":3,"column":36}},"2":{"start":{"line":4,"column":26},"end":{"line":4,"column":67}},"3":{"start":{"line":5,"column":26},"end":{"line":5,"column":67}},"4":{"start":{"line":6,"column":26},"end":{"line":6,"column":67}},"5":{"start":{"line":7,"column":15},"end":{"line":7,"column":38}},"6":{"start":{"line":8,"column":24},"end":{"line":8,"column":55}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":47}},"8":{"start":{"line":10,"column":0},"end":{"line":10,"column":102}},"9":{"start":{"line":11,"column":0},"end":{"line":11,"column":60}},"10":{"start":{"line":12,"column":0},"end":{"line":12,"column":58}},"11":{"start":{"line":13,"column":0},"end":{"line":13,"column":25}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/router/matchRouter.ts","sources":["/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/router/matchRouter.ts"],"names":[],"mappings":";;AAAA,qCAAiC;AACjC,oEAAwD;AACxD,oEAA2D;AAC3D,oEAA6D;AAE7D,MAAM,MAAM,GAAG,IAAA,gBAAM,GAAE,CAAC;AAExB,MAAM,eAAe,GAAG,IAAI,yBAAU,EAAE,CAAC;AAEzC,MAAM,CAAC,GAAG,CAAC,UAAU,EAAE,eAAe,CAAC,MAAM,CAAC,CAAC;AAC/C,MAAM,CAAC,IAAI,CAAC,UAAU,EAAE,yBAAa,EAAE,yBAAe,EAAE,eAAe,CAAC,MAAM,CAAC,CAAC;AAChF,MAAM,CAAC,KAAK,CAAC,qBAAqB,EAAE,eAAe,CAAC,MAAM,CAAC,CAAC;AAC5D,MAAM,CAAC,KAAK,CAAC,cAAc,EAAE,eAAe,CAAC,WAAW,CAAC,CAAC;AAE1D,kBAAe,MAAM,CAAC","sourcesContent":["import { Router } from 'express';\nimport Controller from '../controllers/matchController';\nimport validateToken from '../middlewares/tokenMiddleware';\nimport validationMatch from '../middlewares/matchMiddleware';\n\nconst routes = Router();\n\nconst matchController = new Controller();\n\nroutes.get('/matches', matchController.getAll);\nroutes.post('/matches', validateToken, validationMatch, matchController.create);\nroutes.patch('/matches/:id/finish', matchController.finish);\nroutes.patch('/matches/:id', matchController.updateGoals);\n\nexport default routes;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1a75f86843a45d2ab35a5b19013db3b98d603d67"},"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/controllers/matchController.ts":{"path":"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/controllers/matchController.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":23},"end":{"line":3,"column":58}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":53}},"3":{"start":{"line":7,"column":8},"end":{"line":26,"column":10}},"4":{"start":{"line":8,"column":12},"end":{"line":25,"column":13}},"5":{"start":{"line":9,"column":39},"end":{"line":9,"column":48}},"6":{"start":{"line":12,"column":16},"end":{"line":18,"column":17}},"7":{"start":{"line":13,"column":20},"end":{"line":13,"column":59}},"8":{"start":{"line":16,"column":20},"end":{"line":16,"column":49}},"9":{"start":{"line":17,"column":20},"end":{"line":17,"column":71}},"10":{"start":{"line":19,"column":16},"end":{"line":20,"column":74}},"11":{"start":{"line":20,"column":20},"end":{"line":20,"column":74}},"12":{"start":{"line":21,"column":16},"end":{"line":21,"column":53}},"13":{"start":{"line":24,"column":16},"end":{"line":24,"column":28}},"14":{"start":{"line":27,"column":8},"end":{"line":46,"column":10}},"15":{"start":{"line":28,"column":12},"end":{"line":45,"column":13}},"16":{"start":{"line":29,"column":77},"end":{"line":29,"column":85}},"17":{"start":{"line":30,"column":30},"end":{"line":35,"column":18}},"18":{"start":{"line":36,"column":16},"end":{"line":40,"column":17}},"19":{"start":{"line":37,"column":20},"end":{"line":39,"column":77}},"20":{"start":{"line":41,"column":16},"end":{"line":41,"column":51}},"21":{"start":{"line":44,"column":16},"end":{"line":44,"column":28}},"22":{"start":{"line":47,"column":8},"end":{"line":56,"column":10}},"23":{"start":{"line":48,"column":12},"end":{"line":55,"column":13}},"24":{"start":{"line":49,"column":27},"end":{"line":49,"column":40}},"25":{"start":{"line":50,"column":16},"end":{"line":50,"column":47}},"26":{"start":{"line":51,"column":16},"end":{"line":51,"column":69}},"27":{"start":{"line":54,"column":16},"end":{"line":54,"column":28}},"28":{"start":{"line":57,"column":8},"end":{"line":73,"column":10}},"29":{"start":{"line":58,"column":12},"end":{"line":72,"column":13}},"30":{"start":{"line":59,"column":57},"end":{"line":59,"column":65}},"31":{"start":{"line":60,"column":27},"end":{"line":60,"column":40}},"32":{"start":{"line":61,"column":30},"end":{"line":64,"column":18}},"33":{"start":{"line":65,"column":16},"end":{"line":67,"column":17}},"34":{"start":{"line":66,"column":20},"end":{"line":66,"column":81}},"35":{"start":{"line":68,"column":16},"end":{"line":68,"column":80}},"36":{"start":{"line":71,"column":16},"end":{"line":71,"column":28}},"37":{"start":{"line":76,"column":0},"end":{"line":76,"column":29}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":4},"end":{"line":5,"column":5}},"loc":{"start":{"line":5,"column":18},"end":{"line":74,"column":5}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":7,"column":22},"end":{"line":7,"column":23}},"loc":{"start":{"line":7,"column":48},"end":{"line":26,"column":9}},"line":7},"2":{"name":"(anonymous_2)","decl":{"start":{"line":27,"column":22},"end":{"line":27,"column":23}},"loc":{"start":{"line":27,"column":48},"end":{"line":46,"column":9}},"line":27},"3":{"name":"(anonymous_3)","decl":{"start":{"line":47,"column":22},"end":{"line":47,"column":23}},"loc":{"start":{"line":47,"column":48},"end":{"line":56,"column":9}},"line":47},"4":{"name":"(anonymous_4)","decl":{"start":{"line":57,"column":27},"end":{"line":57,"column":28}},"loc":{"start":{"line":57,"column":53},"end":{"line":73,"column":9}},"line":57}},"branchMap":{"0":{"loc":{"start":{"line":12,"column":16},"end":{"line":18,"column":17}},"type":"if","locations":[{"start":{"line":12,"column":16},"end":{"line":18,"column":17}},{"start":{"line":12,"column":16},"end":{"line":18,"column":17}}],"line":12},"1":{"loc":{"start":{"line":19,"column":16},"end":{"line":20,"column":74}},"type":"if","locations":[{"start":{"line":19,"column":16},"end":{"line":20,"column":74}},{"start":{"line":19,"column":16},"end":{"line":20,"column":74}}],"line":19},"2":{"loc":{"start":{"line":36,"column":16},"end":{"line":40,"column":17}},"type":"if","locations":[{"start":{"line":36,"column":16},"end":{"line":40,"column":17}},{"start":{"line":36,"column":16},"end":{"line":40,"column":17}}],"line":36},"3":{"loc":{"start":{"line":65,"column":16},"end":{"line":67,"column":17}},"type":"if","locations":[{"start":{"line":65,"column":16},"end":{"line":67,"column":17}},{"start":{"line":65,"column":16},"end":{"line":67,"column":17}}],"line":65}},"s":{"0":1,"1":1,"2":1,"3":1,"4":2,"5":2,"6":2,"7":1,"8":1,"9":1,"10":2,"11":0,"12":2,"13":0,"14":1,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":1,"23":1,"24":1,"25":1,"26":1,"27":0,"28":1,"29":2,"30":2,"31":2,"32":2,"33":2,"34":1,"35":1,"36":0,"37":1},"f":{"0":1,"1":2,"2":0,"3":1,"4":2},"b":{"0":[1,1],"1":[0,2],"2":[0,0],"3":[1,1]},"inputSourceMap":{"version":3,"file":"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/controllers/matchController.ts","sources":["/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/controllers/matchController.ts"],"names":[],"mappings":"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","sourcesContent":["import { Request, Response, NextFunction } from 'express';\nimport MatchService from '../services/matchService';\n\nexport default class Controller {\n  private mService = new MatchService();\n\n  getAll = async (req: Request, res: Response, next: NextFunction) => {\n    try {\n      const { inProgress } = req.query;\n      let matches;\n      let prog;\n      if (inProgress === undefined) {\n        matches = await this.mService.getAll();\n      } else {\n        prog = inProgress === 'true';\n        matches = await this.mService.getAllFiltered(\n          prog as unknown as boolean,\n        );\n      }\n\n      if (!matches) return res.status(404).send({ message: 'Not Found' });\n      return res.status(200).json(matches);\n    } catch (error) {\n      next(error);\n    }\n  };\n\n  create = async (req: Request, res: Response, next: NextFunction) => {\n    try {\n      const { homeTeam, awayTeam, homeTeamGoals, awayTeamGoals } = req.body;\n      const match = await this.mService.create({\n        homeTeam,\n        awayTeam,\n        homeTeamGoals,\n        awayTeamGoals,\n      });\n\n      if (!match) {\n        return res\n          .status(404)\n          .send({ message: 'There is no team with such id!' });\n      }\n\n      return res.status(201).json(match);\n    } catch (error) {\n      next(error);\n    }\n  };\n\n  finish = async (req: Request, res: Response, next: NextFunction) => {\n    try {\n      const id = req.params.id as unknown as number;\n      await this.mService.finish(id);\n      return res.status(200).json({ message: 'Finished' });\n    } catch (error) {\n      next(error);\n    }\n  };\n\n  updateGoals = async (req: Request, res: Response, next: NextFunction) => {\n    try {\n      const { homeTeamGoals, awayTeamGoals } = req.body;\n      const id = req.params.id as unknown as number;\n      const goals = await this.mService.updateGoals(id, {\n        homeTeamGoals,\n        awayTeamGoals,\n      });\n      if (goals === false) {\n        return res.status(404).send({ message: 'Match not found.' });\n      }\n      return res.status(200).json({ message: 'Updated successfuly' });\n    } catch (error) {\n      next(error);\n    }\n  };\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"0738355b402a3e43f383288be3110618056dd5dc"},"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/services/matchService.ts":{"path":"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/services/matchService.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":20},"end":{"line":3,"column":59}},"2":{"start":{"line":4,"column":21},"end":{"line":4,"column":61}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":42}},"4":{"start":{"line":8,"column":8},"end":{"line":25,"column":10}},"5":{"start":{"line":9,"column":28},"end":{"line":22,"column":14}},"6":{"start":{"line":23,"column":33},"end":{"line":23,"column":40}},"7":{"start":{"line":24,"column":12},"end":{"line":24,"column":32}},"8":{"start":{"line":26,"column":8},"end":{"line":41,"column":10}},"9":{"start":{"line":27,"column":28},"end":{"line":38,"column":14}},"10":{"start":{"line":39,"column":33},"end":{"line":39,"column":40}},"11":{"start":{"line":40,"column":12},"end":{"line":40,"column":92}},"12":{"start":{"line":40,"column":50},"end":{"line":40,"column":90}},"13":{"start":{"line":42,"column":8},"end":{"line":60,"column":10}},"14":{"start":{"line":43,"column":73},"end":{"line":43,"column":82}},"15":{"start":{"line":44,"column":26},"end":{"line":46,"column":14}},"16":{"start":{"line":47,"column":26},"end":{"line":49,"column":14}},"17":{"start":{"line":50,"column":12},"end":{"line":52,"column":13}},"18":{"start":{"line":51,"column":16},"end":{"line":51,"column":29}},"19":{"start":{"line":53,"column":26},"end":{"line":58,"column":14}},"20":{"start":{"line":59,"column":12},"end":{"line":59,"column":25}},"21":{"start":{"line":61,"column":8},"end":{"line":65,"column":10}},"22":{"start":{"line":62,"column":12},"end":{"line":64,"column":34}},"23":{"start":{"line":66,"column":8},"end":{"line":74,"column":10}},"24":{"start":{"line":67,"column":31},"end":{"line":69,"column":14}},"25":{"start":{"line":70,"column":12},"end":{"line":72,"column":13}},"26":{"start":{"line":71,"column":16},"end":{"line":71,"column":29}},"27":{"start":{"line":73,"column":12},"end":{"line":73,"column":62}},"28":{"start":{"line":77,"column":0},"end":{"line":77,"column":26}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":4},"end":{"line":6,"column":5}},"loc":{"start":{"line":6,"column":18},"end":{"line":75,"column":5}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":22},"end":{"line":8,"column":23}},"loc":{"start":{"line":8,"column":34},"end":{"line":25,"column":9}},"line":8},"2":{"name":"(anonymous_2)","decl":{"start":{"line":26,"column":30},"end":{"line":26,"column":31}},"loc":{"start":{"line":26,"column":52},"end":{"line":41,"column":9}},"line":26},"3":{"name":"(anonymous_3)","decl":{"start":{"line":40,"column":39},"end":{"line":40,"column":40}},"loc":{"start":{"line":40,"column":50},"end":{"line":40,"column":90}},"line":40},"4":{"name":"(anonymous_4)","decl":{"start":{"line":42,"column":22},"end":{"line":42,"column":23}},"loc":{"start":{"line":42,"column":43},"end":{"line":60,"column":9}},"line":42},"5":{"name":"(anonymous_5)","decl":{"start":{"line":61,"column":22},"end":{"line":61,"column":23}},"loc":{"start":{"line":61,"column":36},"end":{"line":65,"column":9}},"line":61},"6":{"name":"(anonymous_6)","decl":{"start":{"line":66,"column":27},"end":{"line":66,"column":28}},"loc":{"start":{"line":66,"column":48},"end":{"line":74,"column":9}},"line":66}},"branchMap":{"0":{"loc":{"start":{"line":50,"column":12},"end":{"line":52,"column":13}},"type":"if","locations":[{"start":{"line":50,"column":12},"end":{"line":52,"column":13}},{"start":{"line":50,"column":12},"end":{"line":52,"column":13}}],"line":50},"1":{"loc":{"start":{"line":50,"column":16},"end":{"line":50,"column":32}},"type":"binary-expr","locations":[{"start":{"line":50,"column":16},"end":{"line":50,"column":22}},{"start":{"line":50,"column":26},"end":{"line":50,"column":32}}],"line":50},"2":{"loc":{"start":{"line":70,"column":12},"end":{"line":72,"column":13}},"type":"if","locations":[{"start":{"line":70,"column":12},"end":{"line":72,"column":13}},{"start":{"line":70,"column":12},"end":{"line":72,"column":13}}],"line":70}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":3,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":1,"22":1,"23":1,"24":2,"25":2,"26":1,"27":1,"28":1},"f":{"0":1,"1":1,"2":1,"3":3,"4":0,"5":1,"6":2},"b":{"0":[0,0],"1":[0,0],"2":[1,1]},"inputSourceMap":{"version":3,"file":"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/services/matchService.ts","sources":["/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/services/matchService.ts"],"names":[],"mappings":"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","sourcesContent":["import team from '../database/models/TeamModel';\nimport Model from '../database/models/MatchModel';\nimport {\n  MatchInterface,\n  MatchData,\n  MatchGoals,\n} from '../interfaces/matchInterface';\n\nexport default class Service {\n  private model = Model;\n\n  getAll = async () => {\n    const matches = await this.model.findAll({\n      include: [\n        {\n          model: team,\n          as: 'teamHome',\n          attributes: { exclude: ['id'] },\n        },\n        {\n          model: team,\n          as: 'teamAway',\n          attributes: { exclude: ['id'] },\n        },\n      ],\n    });\n    const typedMatches = matches as unknown as MatchInterface[];\n\n    return typedMatches;\n  };\n\n  getAllFiltered = async (inProgress: boolean) => {\n    const matches = await this.model.findAll({\n      include: [{\n        model: team,\n        as: 'teamHome',\n        attributes: { exclude: ['id'] },\n      }, {\n        model: team,\n        as: 'teamAway',\n        attributes: { exclude: ['id'] },\n      },\n      ],\n    });\n    const typedMatches = matches as unknown as MatchInterface[];\n    return typedMatches.filter((match: MatchInterface) => match.inProgress === Boolean(inProgress));\n  };\n\n  create = async (matchData: MatchData) => {\n    const { homeTeam, awayTeam, homeTeamGoals, awayTeamGoals } = matchData;\n    const hTeam = await this.model.findOne({\n      where: { id: homeTeam },\n    });\n    const aTeam = await this.model.findOne({\n      where: { id: awayTeam },\n    });\n\n    if (!aTeam || !hTeam) {\n      return false;\n    }\n\n    const match = await this.model.create({\n      homeTeam,\n      awayTeam,\n      homeTeamGoals,\n      awayTeamGoals,\n    });\n\n    return match;\n  };\n\n  finish = async (id: number) => {\n    await this.model.update(\n      {\n        inProgress: false,\n      },\n      { where: { id } },\n    );\n  };\n\n  updateGoals = async (id: number, goals: MatchGoals) => {\n    const inProgress = await this.model.findOne({\n      where: { id, inProgress: true },\n    });\n    if (!inProgress) {\n      return false;\n    }\n    await this.model.update(goals, { where: { id } });\n  };\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"7edbcb489d864d1a0d2571e807fc4c6763c950d9"},"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/database/models/MatchModel.ts":{"path":"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/database/models/MatchModel.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":20},"end":{"line":3,"column":40}},"2":{"start":{"line":4,"column":11},"end":{"line":4,"column":23}},"3":{"start":{"line":5,"column":20},"end":{"line":5,"column":42}},"4":{"start":{"line":8,"column":0},"end":{"line":22,"column":3}},"5":{"start":{"line":23,"column":0},"end":{"line":23,"column":81}},"6":{"start":{"line":24,"column":0},"end":{"line":24,"column":81}},"7":{"start":{"line":25,"column":0},"end":{"line":25,"column":80}},"8":{"start":{"line":26,"column":0},"end":{"line":26,"column":80}},"9":{"start":{"line":27,"column":0},"end":{"line":27,"column":24}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/database/models/MatchModel.ts","sources":["/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/database/models/MatchModel.ts"],"names":[],"mappings":";;AAAA,yCAAoD;AACpD,wBAAmB;AACnB,2CAA+B;AAE/B,MAAM,KAAM,SAAQ,iBAAK;CAMxB;AAED,KAAK,CAAC,IAAI,CACR;IACE,QAAQ,EAAE,mBAAO;IACjB,aAAa,EAAE,mBAAO;IACtB,QAAQ,EAAE,mBAAO;IACjB,aAAa,EAAE,mBAAO;IACtB,UAAU,EAAE;QACV,IAAI,EAAE,mBAAO;QACb,YAAY,EAAE,IAAI;KACnB;CACF,EACD;IACE,WAAW,EAAE,IAAI;IACjB,SAAS,EAAE,UAAE;IACb,SAAS,EAAE,OAAO;IAClB,UAAU,EAAE,KAAK;CAClB,CACF,CAAC;AAEF,KAAK,CAAC,SAAS,CAAC,mBAAI,EAAE,EAAE,UAAU,EAAE,UAAU,EAAE,EAAE,EAAE,UAAU,EAAE,CAAC,CAAC;AAClE,KAAK,CAAC,SAAS,CAAC,mBAAI,EAAE,EAAE,UAAU,EAAE,UAAU,EAAE,EAAE,EAAE,UAAU,EAAE,CAAC,CAAC;AAElE,mBAAI,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,UAAU,EAAE,UAAU,EAAE,EAAE,EAAE,WAAW,EAAE,CAAC,CAAC;AACjE,mBAAI,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,UAAU,EAAE,UAAU,EAAE,EAAE,EAAE,WAAW,EAAE,CAAC,CAAC;AAEjE,kBAAe,KAAK,CAAC","sourcesContent":["import { Model, INTEGER, BOOLEAN } from 'sequelize';\nimport db from '.';\nimport Team from './TeamModel';\n\nclass Match extends Model {\n  public homeTeam: number;\n  public homeTeamGoals: number;\n  public awayTeam: number;\n  public awayTeamGoals: number;\n  public inProgress: boolean;\n}\n\nMatch.init(\n  {\n    homeTeam: INTEGER,\n    homeTeamGoals: INTEGER,\n    awayTeam: INTEGER,\n    awayTeamGoals: INTEGER,\n    inProgress: {\n      type: BOOLEAN,\n      defaultValue: true,\n    },\n  },\n  {\n    underscored: true,\n    sequelize: db,\n    modelName: 'match',\n    timestamps: false,\n  },\n);\n\nMatch.belongsTo(Team, { foreignKey: 'homeTeam', as: 'teamHome' });\nMatch.belongsTo(Team, { foreignKey: 'awayTeam', as: 'teamAway' });\n\nTeam.hasMany(Match, { foreignKey: 'homeTeam', as: 'homeMatch' });\nTeam.hasMany(Match, { foreignKey: 'awayTeam', as: 'awayMatch' });\n\nexport default Match;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"8a565f211e876bcc7f273c7e4a03fe9fb2d1b781"},"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/middlewares/tokenMiddleware.ts":{"path":"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/middlewares/tokenMiddleware.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":20},"end":{"line":3,"column":49}},"2":{"start":{"line":4,"column":22},"end":{"line":12,"column":1}},"3":{"start":{"line":5,"column":30},"end":{"line":5,"column":41}},"4":{"start":{"line":6,"column":18},"end":{"line":6,"column":31}},"5":{"start":{"line":7,"column":16},"end":{"line":7,"column":41}},"6":{"start":{"line":8,"column":4},"end":{"line":10,"column":5}},"7":{"start":{"line":9,"column":8},"end":{"line":9,"column":80}},"8":{"start":{"line":11,"column":4},"end":{"line":11,"column":11}},"9":{"start":{"line":13,"column":0},"end":{"line":13,"column":32}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":22},"end":{"line":4,"column":23}},"loc":{"start":{"line":4,"column":42},"end":{"line":12,"column":1}},"line":4}},"branchMap":{"0":{"loc":{"start":{"line":8,"column":4},"end":{"line":10,"column":5}},"type":"if","locations":[{"start":{"line":8,"column":4},"end":{"line":10,"column":5}},{"start":{"line":8,"column":4},"end":{"line":10,"column":5}}],"line":8}},"s":{"0":1,"1":1,"2":1,"3":4,"4":4,"5":4,"6":4,"7":1,"8":3,"9":1},"f":{"0":4},"b":{"0":[1,3]},"inputSourceMap":{"version":3,"file":"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/middlewares/tokenMiddleware.ts","sources":["/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/middlewares/tokenMiddleware.ts"],"names":[],"mappings":";;AACA,kDAA2C;AAE3C,MAAM,aAAa,GAAG,CAAC,GAAY,EAAE,GAAa,EAAE,IAAkB,EAAE,EAAE;IACxE,MAAM,EAAE,aAAa,EAAE,GAAG,GAAG,CAAC,OAAO,CAAC;IACtC,MAAM,KAAK,GAAG,aAAuB,CAAC;IACtC,MAAM,GAAG,GAAG,IAAI,mBAAS,EAAE,CAAC;IAC5B,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,KAAK,CAAC,EAAE;QAC3B,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,6BAA6B,EAAE,CAAC,CAAC;KACzE;IACD,IAAI,EAAE,CAAC;AACT,CAAC,CAAC;AAEF,kBAAe,aAAa,CAAC","sourcesContent":["import { Request, Response, NextFunction } from 'express';\nimport HandleJWT from '../funcs/handleJWT';\n\nconst validateToken = (req: Request, res: Response, next: NextFunction) => {\n  const { authorization } = req.headers;\n  const token = authorization as string;\n  const jwt = new HandleJWT();\n  if (!jwt.verifyToken(token)) {\n    return res.status(401).send({ message: 'Token must be a valid token' });\n  }\n  next();\n};\n\nexport default validateToken;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"79cc0ad1430816982153c9264ad851d426d18989"},"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/middlewares/matchMiddleware.ts":{"path":"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/middlewares/matchMiddleware.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":19},"end":{"line":3,"column":77}},"2":{"start":{"line":5,"column":4},"end":{"line":9,"column":5}},"3":{"start":{"line":5,"column":17},"end":{"line":5,"column":18}},"4":{"start":{"line":6,"column":8},"end":{"line":8,"column":9}},"5":{"start":{"line":7,"column":12},"end":{"line":7,"column":42}},"6":{"start":{"line":10,"column":4},"end":{"line":10,"column":24}},"7":{"start":{"line":13,"column":20},"end":{"line":13,"column":41}},"8":{"start":{"line":14,"column":4},"end":{"line":19,"column":5}},"9":{"start":{"line":14,"column":17},"end":{"line":14,"column":18}},"10":{"start":{"line":15,"column":34},"end":{"line":15,"column":44}},"11":{"start":{"line":16,"column":8},"end":{"line":18,"column":9}},"12":{"start":{"line":17,"column":12},"end":{"line":17,"column":37}},"13":{"start":{"line":20,"column":4},"end":{"line":20,"column":24}},"14":{"start":{"line":23,"column":35},"end":{"line":23,"column":43}},"15":{"start":{"line":24,"column":4},"end":{"line":28,"column":5}},"16":{"start":{"line":25,"column":8},"end":{"line":27,"column":11}},"17":{"start":{"line":29,"column":18},"end":{"line":29,"column":26}},"18":{"start":{"line":30,"column":18},"end":{"line":30,"column":43}},"19":{"start":{"line":31,"column":4},"end":{"line":33,"column":5}},"20":{"start":{"line":32,"column":8},"end":{"line":32,"column":78}},"21":{"start":{"line":34,"column":4},"end":{"line":34,"column":36}},"22":{"start":{"line":35,"column":4},"end":{"line":37,"column":5}},"23":{"start":{"line":36,"column":8},"end":{"line":36,"column":78}},"24":{"start":{"line":38,"column":4},"end":{"line":38,"column":11}},"25":{"start":{"line":40,"column":0},"end":{"line":40,"column":34}}},"fnMap":{"0":{"name":"validateProperties","decl":{"start":{"line":4,"column":9},"end":{"line":4,"column":27}},"loc":{"start":{"line":4,"column":35},"end":{"line":11,"column":1}},"line":4},"1":{"name":"validateValues","decl":{"start":{"line":12,"column":9},"end":{"line":12,"column":23}},"loc":{"start":{"line":12,"column":31},"end":{"line":21,"column":1}},"line":12},"2":{"name":"validationMatch","decl":{"start":{"line":22,"column":9},"end":{"line":22,"column":24}},"loc":{"start":{"line":22,"column":41},"end":{"line":39,"column":1}},"line":22}},"branchMap":{"0":{"loc":{"start":{"line":6,"column":8},"end":{"line":8,"column":9}},"type":"if","locations":[{"start":{"line":6,"column":8},"end":{"line":8,"column":9}},{"start":{"line":6,"column":8},"end":{"line":8,"column":9}}],"line":6},"1":{"loc":{"start":{"line":16,"column":8},"end":{"line":18,"column":9}},"type":"if","locations":[{"start":{"line":16,"column":8},"end":{"line":18,"column":9}},{"start":{"line":16,"column":8},"end":{"line":18,"column":9}}],"line":16},"2":{"loc":{"start":{"line":24,"column":4},"end":{"line":28,"column":5}},"type":"if","locations":[{"start":{"line":24,"column":4},"end":{"line":28,"column":5}},{"start":{"line":24,"column":4},"end":{"line":28,"column":5}}],"line":24},"3":{"loc":{"start":{"line":31,"column":4},"end":{"line":33,"column":5}},"type":"if","locations":[{"start":{"line":31,"column":4},"end":{"line":33,"column":5}},{"start":{"line":31,"column":4},"end":{"line":33,"column":5}}],"line":31},"4":{"loc":{"start":{"line":35,"column":4},"end":{"line":37,"column":5}},"type":"if","locations":[{"start":{"line":35,"column":4},"end":{"line":37,"column":5}},{"start":{"line":35,"column":4},"end":{"line":37,"column":5}}],"line":35}},"s":{"0":1,"1":1,"2":2,"3":2,"4":5,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":0,"14":3,"15":3,"16":1,"17":2,"18":2,"19":2,"20":1,"21":1,"22":1,"23":1,"24":0,"25":1},"f":{"0":2,"1":1,"2":3},"b":{"0":[1,4],"1":[1,0],"2":[1,2],"3":[1,1],"4":[1,0]},"inputSourceMap":{"version":3,"file":"/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/middlewares/matchMiddleware.ts","sources":["/home/miguel/Trybe/projetos/sd-017-trybe-futebol-clube/app/backend/src/middlewares/matchMiddleware.ts"],"names":[],"mappings":";;AAGA,MAAM,UAAU,GAAG,CAAC,UAAU,EAAE,UAAU,EAAE,eAAe,EAAE,eAAe,CAAC,CAAC;AAE9E,SAAS,kBAAkB,CAAC,KAAgB;IAC1C,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,EAAE;QAC7C,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC,EAAE;YAC/D,OAAO,CAAC,KAAK,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;SAC/B;KACF;IACD,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;AACtB,CAAC;AAED,SAAS,cAAc,CAAC,KAAgB;IACtC,MAAM,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;IACtC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,EAAE;QAC1C,MAAM,CAAC,QAAQ,EAAE,KAAK,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;QACrC,IAAI,CAAC,KAAK,EAAE;YACV,OAAO,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;SAC1B;KACF;IACD,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;AACtB,CAAC;AAED,SAAS,eAAe,CAAC,GAAY,EAAE,GAAa,EAAE,IAAkB;IACtE,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,GAAG,GAAG,CAAC,IAAI,CAAC;IACxC,IAAI,QAAQ,KAAK,QAAQ,EAAE;QACzB,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;YAC1B,OAAO,EAAE,2DAA2D;SACrE,CAAC,CAAC;KACJ;IAED,MAAM,KAAK,GAAc,GAAG,CAAC,IAAI,CAAC;IAElC,IAAI,CAAC,KAAK,CAAC,GAAG,kBAAkB,CAAC,KAAK,CAAC,CAAC;IACxC,IAAI,CAAC,KAAK,EAAE;QACV,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,2BAA2B,EAAE,CAAC,CAAC;KACvE;IAED,CAAC,KAAK,CAAC,GAAG,cAAc,CAAC,KAAK,CAAC,CAAC;IAChC,IAAI,CAAC,KAAK,EAAE;QACV,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,2BAA2B,EAAE,CAAC,CAAC;KACvE;IAED,IAAI,EAAE,CAAC;AACT,CAAC;AAED,kBAAe,eAAe,CAAC","sourcesContent":["import { NextFunction, Request, Response } from 'express';\nimport { MatchData } from '../interfaces/matchInterface';\n\nconst properties = ['homeTeam', 'awayTeam', 'homeTeamGoals', 'awayTeamGoals'];\n\nfunction validateProperties(match: MatchData): [boolean, string | null] {\n  for (let i = 0; i < properties.length; i += 1) {\n    if (!Object.prototype.hasOwnProperty.call(match, properties[i])) {\n      return [false, properties[i]];\n    }\n  }\n  return [true, null];\n}\n\nfunction validateValues(match: MatchData): [boolean, string | null] {\n  const entries = Object.entries(match);\n  for (let i = 0; i < entries.length; i += 1) {\n    const [property, value] = entries[i];\n    if (!value) {\n      return [false, property];\n    }\n  }\n  return [true, null];\n}\n\nfunction validationMatch(req: Request, res: Response, next: NextFunction) {\n  const { homeTeam, awayTeam } = req.body;\n  if (homeTeam === awayTeam) {\n    return res.status(401).send({\n      message: 'It is not possible to create a match with two equal teams',\n    });\n  }\n\n  const match: MatchData = req.body;\n\n  let [valid] = validateProperties(match);\n  if (!valid) {\n    return res.status(400).send({ message: 'All fields must be filled' });\n  }\n\n  [valid] = validateValues(match);\n  if (!valid) {\n    return res.status(400).send({ message: 'All fields must be filled' });\n  }\n\n  next();\n}\n\nexport default validationMatch;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"2d2e72c65334df242dfe6b1bbc99f662089050fd"}}